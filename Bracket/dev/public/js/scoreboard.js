// Generated by CoffeeScript 1.2.1-pre
(function() {
  var currentElement, getParameterByName, myScroll, numGames, timeSlide;

  myScroll = null;

  currentElement = 1;

  timeSlide = 200;

  numGames = 0;

  getParameterByName = function(name) {
    var regex, regexS, results;
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    regexS = "[\\?&]" + name + "=([^&#]*)";
    regex = new RegExp(regexS);
    results = regex.exec(window.location.search);
    if (results == null) {
      return "";
    } else {
      return decodeURIComponent(results[1].replace(/\+/g, " "));
    }
  };

  $(document).ready(function() {
    var currentRound, currentYear;
    currentYear = getParameterByName("year");
    currentRound = getParameterByName("round");
    return $.getJSON("data/bracket" + currentYear + ".json", function(data) {
      var gameData;
      gameData = data.bracket.round[currentRound - 1];
      numGames = gameData.game.length;
      $("#thelist").append(Mustache.to_html($("#scoreboard-template").html(), {
        scoreboardData: gameData
      }));
      myScroll = new iScroll('wrapper', {
        bounceLock: true,
        hScrollbar: false,
        vScrollbar: false,
        snap: true
      });
      $("#nextBtn").click(function() {
        currentElement++;
        currentElement = Math.min(numGames - 2, currentElement);
        return myScroll.scrollToElement('li:nth-child(' + currentElement + ')', timeSlide);
      });
      return $("#prevBtn").click(function() {
        currentElement--;
        currentElement = Math.max(1, currentElement);
        return myScroll.scrollToElement('li:nth-child(' + currentElement + ')', timeSlide);
      });
    });
  });

}).call(this);
